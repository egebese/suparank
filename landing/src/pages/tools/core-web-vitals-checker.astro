---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';

const tool = {
  id: 'core-web-vitals-checker',
  name: 'Core Web Vitals Checker',
  command: '/suparank-cwv',
  description: 'Test Core Web Vitals performance: LCP (Largest Contentful Paint), INP (Interaction to Next Paint), and CLS (Cumulative Layout Shift) with fix recommendations.',
  longDescription: 'Analyze your Core Web Vitals directly in your AI coding assistant. Test LCP (Largest Contentful Paint, target < 2.5s), INP (Interaction to Next Paint, target < 200ms), and CLS (Cumulative Layout Shift, target < 0.1). Get specific fix recommendations for each metric including lazy loading, image optimization, font loading, and layout shift prevention.',
  category: 'Performance',
  icon: 'ph-duotone ph-lightning'
};

const features = [
  { name: 'LCP Analysis', description: 'Identify render-blocking resources, large images, and slow server response' },
  { name: 'INP Detection', description: 'Find long tasks, heavy JavaScript, and slow event handlers' },
  { name: 'CLS Prevention', description: 'Detect missing dimensions, dynamic content, and layout shifts' },
  { name: '2025 Thresholds', description: 'Uses the latest Google thresholds: LCP < 2.5s, INP < 200ms, CLS < 0.1' },
  { name: 'Code-Level Fixes', description: 'Get specific fixes with line numbers and code examples' },
  { name: 'Resource Analysis', description: 'Identify large assets, unoptimized images, and blocking scripts' },
  { name: 'Framework Detection', description: 'Tailored recommendations for React, Next.js, Astro, Vue, etc.' },
  { name: 'Priority Scoring', description: 'Issues ranked by impact on real user experience' }
];

const faqs = [
  {
    question: 'What are Core Web Vitals?',
    answer: 'Core Web Vitals are Google\'s official performance metrics that measure user experience: LCP (Largest Contentful Paint) measures loading speed, INP (Interaction to Next Paint) measures interactivity, and CLS (Cumulative Layout Shift) measures visual stability. Good scores are LCP < 2.5s, INP < 200ms, and CLS < 0.1.'
  },
  {
    question: 'How do I improve LCP (Largest Contentful Paint)?',
    answer: 'Improve LCP by: 1) Preloading hero images with <link rel="preload">, 2) Optimizing images with WebP/AVIF formats and responsive sizes, 3) Reducing server response time (TTFB), 4) Eliminating render-blocking resources, 5) Using a CDN for faster asset delivery, and 6) Implementing lazy loading for below-the-fold content.'
  },
  {
    question: 'What is INP and why did it replace FID?',
    answer: 'INP (Interaction to Next Paint) replaced FID in March 2024 because it measures responsiveness throughout the entire page lifecycle, not just the first interaction. INP tracks all user interactions (clicks, taps, keyboard inputs) and reports the longest delay. Target < 200ms by reducing JavaScript execution time, breaking up long tasks, and optimizing event handlers.'
  },
  {
    question: 'How do I fix CLS (Cumulative Layout Shift)?',
    answer: 'Fix CLS by: 1) Always set width and height attributes on images and videos, 2) Reserve space for ads and embeds with min-height, 3) Use font-display: optional to prevent font-loading shifts, 4) Avoid inserting content above existing content (unless in response to user interaction), and 5) Use CSS aspect-ratio for dynamic content. Each layout shift is scored by impact area × distance moved.'
  }
];

const softwareSchema = {
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "Suparank Core Web Vitals Checker",
  "applicationCategory": "DeveloperApplication",
  "operatingSystem": "Cross-platform",
  "description": tool.longDescription,
  "url": `https://suparank.io/tools/${tool.id}`,
  "author": {
    "@type": "Organization",
    "name": "Suparank"
  },
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  }
};

const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": faqs.map(faq => ({
    "@type": "Question",
    "name": faq.question,
    "acceptedAnswer": {
      "@type": "Answer",
      "text": faq.answer
    }
  }))
};

const exampleOutput = `═══════════════════════════════════════════════════════════════════
SUPARANK CORE WEB VITALS CHECK
═══════════════════════════════════════════════════════════════════
File: src/pages/index.astro
Date: 2026-01-16
Framework: Astro

───────────────────────────────────────────────────────────────────
LCP (Largest Contentful Paint)
Target: < 2.5s | Risk: MEDIUM
───────────────────────────────────────────────────────────────────

[WARNING] Hero image not preloaded
  Location: Line 45 - <img src="/hero.jpg" ...>
  Impact: LCP delayed by ~500ms as image discovered late
  Fix: Add <link rel="preload" as="image" href="/hero.jpg"> to <head>

[WARNING] Render-blocking CSS
  Location: Line 12 - <link href="/fonts.css">
  Impact: Delays first paint until CSS loads
  Fix: Inline critical CSS or use font-display: swap

───────────────────────────────────────────────────────────────────
INP (Interaction to Next Paint)
Target: < 200ms | Risk: LOW
───────────────────────────────────────────────────────────────────

✓ No long tasks detected in static analysis
✓ Event handlers appear lightweight
⚠ Consider: React hydration may add interactivity delay

───────────────────────────────────────────────────────────────────
CLS (Cumulative Layout Shift)
Target: < 0.1 | Risk: HIGH
───────────────────────────────────────────────────────────────────

[CRITICAL] Image missing dimensions
  Location: Line 45 - <img src="/hero.jpg" alt="...">
  Impact: CLS ~0.15 when image loads and pushes content
  Fix: Add width="1200" height="630" or use aspect-ratio CSS

[WARNING] Dynamic content injection
  Location: Line 78 - {posts.map(...)}
  Impact: Content may shift if loaded asynchronously
  Fix: Reserve space with min-height or skeleton loaders

───────────────────────────────────────────────────────────────────
SUMMARY
───────────────────────────────────────────────────────────────────

LCP: 2 issues (1 warning, 1 optimization)
INP: 0 issues (✓ passes analysis)
CLS: 2 issues (1 critical, 1 warning)

Priority fixes:
1. Add dimensions to hero image (CLS critical)
2. Preload hero image (LCP medium)
3. Inline critical CSS (LCP low)

═══════════════════════════════════════════════════════════════════`;
---

<Layout
  title="Free Core Web Vitals Checker - LCP, INP & CLS Test | Suparank"
  description="Free Core Web Vitals checker. Test LCP (< 2.5s), INP (< 200ms), CLS (< 0.1) with fix recommendations. Works in Claude Code, Cursor & AI coding assistants."
>
  <Fragment slot="head">
    <script type="application/ld+json" set:html={JSON.stringify(softwareSchema)} />
    <script type="application/ld+json" set:html={JSON.stringify(faqSchema)} />
  </Fragment>
  <Header />
  <main>
    <!-- Hero -->
    <section class="pt-24 md:pt-32 pb-16 section-divider">
      <div class="container mx-auto px-6">
        <div class="max-w-4xl mx-auto">
          <a href="/tools" class="inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground mb-6">
            <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
            </svg>
            All Tools
          </a>

          <div class="flex items-center gap-4 mb-6">
            <i class={`text-5xl ${tool.icon}`}></i>
            <div>
              <span class="text-xs font-medium px-2 py-1 bg-primary/10 text-primary rounded-full">
                {tool.category}
              </span>
            </div>
          </div>

          <h1 class="text-4xl md:text-5xl font-bold tracking-tight mb-4">
            {tool.name}
          </h1>
          <p class="text-xl text-muted-foreground mb-8">
            {tool.longDescription}
          </p>

          <!-- Install Command -->
          <div class="bg-muted/50 border p-4 mb-6">
            <p class="text-sm text-muted-foreground mb-2">Install and use:</p>
            <div class="space-y-2">
              <div class="flex items-center gap-2 bg-background border px-4 py-2 font-mono text-sm">
                <code class="flex-1">curl -fsSL https://suparank.io/install | bash</code>
              </div>
              <div class="flex items-center gap-2 bg-background border px-4 py-2 font-mono text-sm">
                <code class="flex-1 text-primary">{tool.command}</code>
              </div>
            </div>
          </div>

          <!-- Supported Platforms -->
          <div class="flex flex-wrap gap-4 text-sm text-muted-foreground">
            <span class="flex items-center gap-2">
              <span class="w-2 h-2 bg-green-500 rounded-full"></span>
              Claude Code
            </span>
            <span class="flex items-center gap-2">
              <span class="w-2 h-2 bg-green-500 rounded-full"></span>
              Cursor
            </span>
            <span class="flex items-center gap-2">
              <span class="w-2 h-2 bg-green-500 rounded-full"></span>
              OpenCode
            </span>
            <span class="flex items-center gap-2">
              <span class="w-2 h-2 bg-green-500 rounded-full"></span>
              Codex
            </span>
          </div>
        </div>
      </div>
    </section>

    <!-- Features -->
    <section class="py-16 section-divider bg-muted/30">
      <div class="container mx-auto px-6">
        <div class="max-w-4xl mx-auto">
          <h2 class="text-2xl font-bold mb-8">What It Checks</h2>
          <div class="grid md:grid-cols-2 gap-4">
            {features.map(feature => (
              <div class="p-4 bg-background border">
                <h3 class="font-semibold mb-1">{feature.name}</h3>
                <p class="text-sm text-muted-foreground">{feature.description}</p>
              </div>
            ))}
          </div>
        </div>
      </div>
    </section>

    <!-- Example Output -->
    <section class="py-16 section-divider">
      <div class="container mx-auto px-6">
        <div class="max-w-4xl mx-auto">
          <h2 class="text-2xl font-bold mb-8">Example Output</h2>
          <div class="bg-zinc-950 text-zinc-100 border p-6 overflow-x-auto">
            <pre class="text-sm font-mono whitespace-pre">{exampleOutput}</pre>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section class="py-16 section-divider bg-muted/30">
      <div class="container mx-auto px-6">
        <div class="max-w-3xl mx-auto">
          <h2 class="text-2xl font-bold mb-8">Frequently Asked Questions</h2>
          <div class="space-y-4">
            {faqs.map(faq => (
              <div class="border p-6 bg-background">
                <h3 class="font-semibold mb-2">{faq.question}</h3>
                <p class="text-muted-foreground">{faq.answer}</p>
              </div>
            ))}
          </div>
        </div>
      </div>
    </section>

    <!-- Related Tools -->
    <section class="py-16 section-divider">
      <div class="container mx-auto px-6">
        <div class="max-w-4xl mx-auto">
          <h2 class="text-2xl font-bold mb-8">Related Tools</h2>
          <div class="grid md:grid-cols-3 gap-4">
            <a href="/tools/technical-seo-audit" class="p-4 border hover:border-primary/50 transition-colors">
              <i class="ph-duotone ph-gear-six text-2xl text-primary"></i>
              <h3 class="font-semibold mt-2">Technical SEO Audit</h3>
              <p class="text-sm text-muted-foreground">Crawlability & indexing</p>
            </a>
            <a href="/tools/alt-text-checker" class="p-4 border hover:border-primary/50 transition-colors">
              <i class="ph-duotone ph-image text-2xl text-primary"></i>
              <h3 class="font-semibold mt-2">Image Alt Text Checker</h3>
              <p class="text-sm text-muted-foreground">Alt text & image SEO</p>
            </a>
            <a href="/tools/accessibility-checker" class="p-4 border hover:border-primary/50 transition-colors">
              <i class="ph-duotone ph-wheelchair text-2xl text-primary"></i>
              <h3 class="font-semibold mt-2">Accessibility Checker</h3>
              <p class="text-sm text-muted-foreground">WCAG 2.2 compliance</p>
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA -->
    <section class="py-16 section-divider bg-primary/5">
      <div class="container mx-auto px-6">
        <div class="max-w-3xl mx-auto text-center">
          <h2 class="text-2xl font-bold mb-4">Check Your Core Web Vitals</h2>
          <p class="text-muted-foreground mb-6">
            Install Suparank tools and analyze LCP, INP, and CLS in seconds.
          </p>
          <div class="bg-background border p-4 max-w-xl mx-auto mb-4">
            <code class="font-mono">curl -fsSL https://suparank.io/install | bash</code>
          </div>
          <p class="text-sm text-muted-foreground">
            Then type <code class="bg-muted px-1">/suparank-cwv</code> in your AI assistant
          </p>
        </div>
      </div>
    </section>
  </main>
  <Footer />
</Layout>
