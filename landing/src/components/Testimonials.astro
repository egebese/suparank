---
const testimonials = [
  {
    quote: "Suparank completely changed how I create content. I went from spending hours on keyword research to having a full content strategy in minutes.",
    name: "Sarah Chen",
    role: "Content Strategist",
    company: "ContentFirst",
    image: "https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop&crop=face",
  },
  {
    quote: "The integration with Claude Desktop is seamless. I just ask for a blog post and it handles everything from research to publishing.",
    name: "Marcus Johnson",
    role: "Founder",
    company: "GrowthLabs",
    image: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face",
  },
  {
    quote: "Finally, an SEO tool that works the way I think. No more switching between 10 different tabs and tools.",
    name: "Emily Rodriguez",
    role: "Marketing Director",
    company: "TechScale",
    image: "https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face",
  },
  {
    quote: "The full pipeline feature saves me hours every week. Research, write, optimize, publish - all in one conversation.",
    name: "David Park",
    role: "SEO Manager",
    company: "Digital Bloom",
    image: "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",
  },
  {
    quote: "We've tested other SEO tools, but nothing matched their level of AI integration and hands-on workflow. Highly recommend.",
    name: "Lisa Thompson",
    role: "Content Lead",
    company: "Insight Media",
    image: "https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=100&h=100&fit=crop&crop=face",
  },
  {
    quote: "The WordPress publishing integration is a game-changer. Write in Claude, publish to my blog with one command.",
    name: "James Wilson",
    role: "Blogger",
    company: "TechInsider",
    image: "https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=100&h=100&fit=crop&crop=face",
  },
];
---

<section class="relative w-full py-16 md:py-32 px-4 overflow-hidden section-divider">
  <!-- Background gradients -->
  <div aria-hidden="true" class="absolute inset-0 isolate z-0">
    <div class="absolute top-0 left-0 h-[500px] w-[300px] -translate-y-1/2 -rotate-45 rounded-full bg-gradient-radial from-foreground/5 to-transparent opacity-60"></div>
    <div class="absolute top-0 right-0 h-[400px] w-[200px] translate-x-1/4 -rotate-45 rounded-full bg-gradient-radial from-primary/10 to-transparent opacity-40"></div>
  </div>

  <div class="container mx-auto px-6 relative z-10">
    <div class="flex flex-col gap-2 mb-10 md:mb-16 pb-10 md:pb-16 relative">
      <p class="text-sm font-medium text-primary mb-2">Testimonials</p>
      <h2 class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-semibold text-foreground tracking-tight text-balance">
        Loved by content creators
      </h2>
      <p class="text-sm md:text-base lg:text-lg text-muted-foreground max-w-xl">
        See how creators and marketers are scaling their content with Suparank.
      </p>
      <!-- Divider after header -->
      <div class="absolute bottom-0 left-1/2 -translate-x-1/2 w-screen h-px bg-border"></div>
    </div>

    <div class="relative grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4">
      {testimonials.map((testimonial, index) => (
        <div
          class="testimonial-card relative border border-border border-dashed p-4 md:p-5 overflow-hidden bg-card/30 hover:bg-card/50 transition-colors"
          style={`--delay: ${index * 0.1}s`}
        >
          <!-- Grid pattern background -->
          <div class="pointer-events-none absolute top-0 left-1/2 -mt-2 -ml-20 h-full w-full opacity-30" style="mask-image: linear-gradient(to bottom, white, transparent);">
            <svg class="absolute inset-0 h-full w-full" aria-hidden="true">
              <defs>
                <pattern id={`grid-${index}`} width="25" height="25" patternUnits="userSpaceOnUse" x="-12" y="4">
                  <path d="M.5 25V.5H25" fill="none" stroke="currentColor" stroke-opacity="0.15" stroke-dasharray="3" />
                </pattern>
              </defs>
              <rect width="100%" height="100%" fill={`url(#grid-${index})`} />
            </svg>
          </div>

          <!-- Content -->
          <div class="relative grid grid-cols-[auto_1fr] gap-x-3">
            <img
              alt={testimonial.name}
              src={testimonial.image}
              loading="lazy"
              class="w-9 h-9 object-cover"
            />
            <div>
              <div class="-mt-0.5">
                <p class="text-sm md:text-base font-medium text-foreground">{testimonial.name}</p>
                <span class="text-muted-foreground block text-[11px] font-light tracking-tight">
                  {testimonial.role} at {testimonial.company}
                </span>
              </div>
              <blockquote class="mt-3">
                <p class="text-foreground/80 text-sm font-light leading-relaxed">
                  "{testimonial.quote}"
                </p>
              </blockquote>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .bg-gradient-radial {
    background: radial-gradient(50% 50% at 50% 50%, var(--tw-gradient-from) 0%, var(--tw-gradient-to) 100%);
  }

  .testimonial-card {
    opacity: 0;
    transform: translateY(-8px);
    filter: blur(4px);
    animation: fadeInUp 0.8s ease-out forwards;
    animation-delay: var(--delay);
  }

  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
      filter: blur(0);
    }
  }

  /* Intersection observer will trigger animation */
  .testimonial-card {
    animation-play-state: paused;
  }

  .testimonials-visible .testimonial-card {
    animation-play-state: running;
  }
</style>

<script>
  const section = document.querySelector('section');
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add('testimonials-visible');
          observer.disconnect();
        }
      });
    },
    { threshold: 0.1 }
  );

  if (section) {
    observer.observe(section);
  }
</script>
